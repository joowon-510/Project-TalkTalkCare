### 2025.01.13

### STUN 서버

- 피어 간의 직접 연결을 막고 , 라우터의 제한을 결정하는 프로토콜
- 중간 연계 역할

### TUN 서버

1 : 1 연결 vs 1 : N 연결

**-기획/설계** 

- 치매 예방 게임 구체화
- 사고력,집중력,논리력 기반의 각 게임 조사
(숫자 계산 게임, 없는 숫자 찾기 등)
- 치매 예방 게임 구현 가능성 
간단한 tool을 사용해 다음과 같이 구현 가능 
![image-1.png](./image-1.png)

👁️ **web rtc 구현 방법**
- MediaStream(getUserMedia)
- 사용자의 카메라와 마이크 같은 곳의 데이터 스트림에 접근한다.
- navigator.mediaDevices.getUserMedia()에서 생성된 입력과 video 태그 또는 RTCPeerConnection으로 넘겨주는 출력을 갖는다.
- navigator.mediaDevices.getUserMedia()가 받는 3개의 매개변수
- 제약 오브젝트(video 사용 여부(또는 해상도), audio 사용 여부 등)
- 성공 시 콜백(MediaStream)
    
    - 실패 시 콜백(error)
    
- getUserMedia()는 반드시 로컬 파일 시스템이 아닌 서버에서 사용되어야하며, 이외의 경우에는 PERMISSION_DENIED: 1 에러가 발생한다.

### 2025.01.14

- 기획/ 설계
    - 핵심 기능
        - 치매 예방 게임
        - 치매 진단 테스트
        - 자가 진단 : SMCQ
        - 보호자 진단 : SDQ
        - 회원관리
        친구 온/오프라인 기능 추가
    - AI 활용 방안
    - 자막 처리
- 기획/설계 기간 리스트업
- CI/CD  
목표 : 소프트웨어 라이프 사이클 간소화 및 가속화
    - CI : 지속적인 통합 
    - 빌드와 단위 테스트 자동화
    - CD: 지속적인 배포
    - CI에서 검증된 코드 배포 자동화
- 데일리 스크럼 방법
    - 명확한 안건, 제한된 시간 내 진행
    - 팀원들이 돌아가며 해야 할 일 공유
    - 서로를 체크하며 불확실성 제거
    - 스크럼 내역 적기 : 여태 한 일 / 오늘 할 일


### 2025.01.15
### 요구사항 정의서 작성

1. REQ-201: 친구리스트에서 화상 전화 시작
기능 설명: 친구 리스트에서 전화걸기 버튼을 통해 바로 연결
상세 기능:
대기중 상태: 30초
화상 전화 수락: 화상통화
화상 전화 거절: "상대방이 거절하였습니다" -> 원래 페이지로 리다이렉트
필수 데이터: 유저 친구 리스트
우선순위: 상
핵심 기능: Y

2. REQ-202: 메인페이지에서 화상 전화 시작
기능 설명: 전화 걸기 버튼을 통해 번호 UI로, 친구가 아닌 사람과도 화상 대화가 가능하게 접근
상세 기능:
반반화면: 반은 전화 거는 UI, 반은 전화번호부
전화 종료 후 친구 추가 여부 물어보기
필수 데이터: 없음
우선순위: 상
핵심 기능: Y

3. REQ-203: 화상 전화 종료
기능 설명: 종료 버튼을 통해 화상통화를 종료
상세 기능:
종료하면 즉시 나감
점수 결과 페이지로 리다이렉트
종료 여부를 묻는 alert 표시
필수 데이터: 메인페이지
우선순위: 상
핵심 기능: Y

4. REQ-204: 대화 자막 처리
기능 설명: 오디오 소리를 자막 처리해서 큼지막하게 표시
상세 기능:
모든 화상 회의에 대해 자막 처리 제공
자막 on/off 기능
자막 크기 조절 가능
필수 데이터: 대화 내용
우선순위: 상
핵심 기능: Y

5. REQ-205: 통화중 통화 요청 처리
기능 설명: 통화중일 때, 다른 통화 요청이 오면 브라우저에 상태값 저장
상세 기능:
통화중일 때, 다른 통화 요청이 오면 상태값을 저장
필수 데이터: 없음
우선순위: 상
핵심 기능: Y

6. REQ-206: 일대일 채팅
기능 설명: 일대일 채팅 (채팅 알림 포함)
상세 기능:
채팅 버튼을 눌러 채팅 시작
채팅이 오면 알림 제공
필수 데이터: 없음
우선순위: 중하
핵심 기능: N

7. REQ-207: 게임 선택
기능 설명: 화상통화 시작 후 게임 선택
상세 기능:
화상통화 시작 시 반반화면
오른쪽 화면에 게임 리스트 (맨 위에 랜덤게임)
제공되는 게임: 8개 ~ 10개
필수 데이터: 게임 리스트
우선순위: 상
핵심 기능: Y

8. REQ-208: 게임 수행
기능 설명: 게임을 수행하고 점수를 부여
상세 기능:
스테이지마다 점수 부여
하나의 게임으로 함께 진행
총 5단계 스테이지
필수 데이터: 없음
우선순위: 상
핵심 기능: Y

9. REQ-209: 한 게임 끝났을 때 다음 게임
기능 설명: 한 게임이 끝나면 게임 리스트를 보여줌
상세 기능: 게임 종료 후 게임 리스트를 표시
필수 데이터: 없음
우선순위: 상
핵심 기능: Y

10. REQ-210: 점수 표시
기능 설명: 게임 중 누적 점수 표시
상세 기능: 맨 위에 누적 점수 표시
필수 데이터: 없음
우선순위: 상
핵심 기능: Y

11. REQ-211: 게임만 종료
기능 설명: 화상 통화는 유지되고, 게임만 종료
상세 기능: 게임만 종료하고, 화상통화는 유지
필수 데이터: 없음
우선순위: 상
핵심 기능: Y

**리텐션 확보는 기술적 완성도와 사용성 향상에 달려 있다 . 



### 2025.01.16

### 요구사항 정의서 마무리

게임	게임 설명	게임이 시작되기 전, 어떤 방식으로 진행되는가에 관한 설명을 유저에게 전달.	"- 게임 시작 전 팝업으로 게임 설명
- 게임 시작 눌러야 게임 진행
- 설명이 필요한 경우 토글을 통한 게임 설명 페이지 접근
- 팝업 혹은 게임 설명 페이지(토글)
-> 각 게임별 진행 과정에 필수적인 이해와 진행 과정을 설명."	각 게임별 설명, 게임 라운드 3개, 게임 난이도 	상
	난이도 조절 	특정 단계의 게임을 성공적으로 수행하였을 경우, 난이도를 올려 다음 단계를 진행할 수 있게 함.  	"- 게임 별 설정한 제한 시간 100초
: 시간 안에 정해진 업무를 모두 수행하였을 경우
-> 같은 종류의 게임을 최대 3단계까지 난이도를 조절하여 제공.
- 난이도 조절 예시: 기억력 게임의 카드 수 늘리기, 순발력 게임의 제한 시간 줄이기 등 "		상
	기억력 게임1	카드 뒤집기 게임을 활용하여 유저의 기억력 향상에 도움을 줌. 	"- 카드 뒤집기 게임
: 같은 모양의 카드 쌍을 일정 개수 만큼 설정 후 일정 시간동안 유저에게 노출하여 기억하게 함.
-> 기억 후 모두 같은 패턴의 뒷면을 노출.
-> 같은 모양이 있던 카드를 기억력을 활용하여 연속으로 뒤집었을 시 수행 성공.
=> 단계가 올라갈수록 카드 쌍 개수 증가"		상
	기억력 게임2	순서 기억하기  게임을 활용하여 유저의 기억력 향상에 도움을 줌. 	"1단계 : 3*3 (1,3,5)
2단계 : 4*4 (2,4,6)
3단계 : 5*5 (3,6,9)
시간 : 60초~100초"		상
	사고력 게임1	데카르트 가위바위보 게임을 활용하여 유저의 사고력 향상에 도움을 줌.	"- 데카르트 가위바위보 게임
: 유저와 상대하는 npc의 가위, 바위, 보 중 하나를 랜덤으로 노출.
-> 유저에겐 가위, 바위, 보 중 하나를 직접 선택하여 낼 수 있도록 한다.
-> 이때, 화면 상단에 유저가 내야하는 문양을 비유적으로 표현하여 사고력을 향상 시킬 수 있도록 함.
- 비유적 표현 예시: 이기지도 말고 비기지도 않는 모양을 내세요.
- 비유적 표현에 맞는 모양을 선택하여 제출하였을 경우, 수행 성공.
=> 문제 개수 10개, 단계마다 시간 감소"		상
	사고력 게임2	똑똑이 방향 게임을 활용하여 유저의 사고력 향상에 도움을 줌.	"-도착지 예측
-단계별로 화살표가 늘어남
-돼지 대신 똑똑이"		상
	집중력 게임1	색깔 단어 찾기 게임을 활용하여 유저의 집중력 향상에 도움을 줌.	"- 색깔 단어 찾기 게임
: 특정 색깔이 적힌 글자에 해당 글자와 다른 색깔을 입힌 후, 유저에게 노출.
-> 화면 상단에 글자의 색 혹은 글자를 입력하라는 보조 지령을 내림.
- 사용자는 보조 지령에 맞는 글자 혹은 색깔을 올바르게 입력하여 집중력 향상에 도움을 줌.
- 보조 지령 예시: 글자의 색깔을 적어주세요.
- 제한 시간 안에 보조 지령에 대해 올바르게 입력하였을 경우 수행 성공.
색깔 : 빨 노 초 파
1단계 : 한 유형
2단계 : 두가지 유형
3단계 : 두가지 유형 + 새로운 색깔"		상
	집중력 게임2	숫자 추적 게임	"-숫자 추적 게임
: 순서대로 숫자 누르기
시간 : 60초
숫자 범위 : 1~100
1단계 : 5개씩 * 3번
2단계 : 7개씩 * 3번
3단계 : 9개씩 * 3번"		중
	순발력 게임1	없는 숫자 찾기 게임을 활용하여 유저의 순발력 향상에 도움을 줌.	"- 없는 숫자 찾기 게임
: 숫자의 범위를 특정하여 일련의 숫자들이 연속적으로 늘어진 배열을 유저에게 노출.
-> 이때, 연속된 숫자 중 하나가 없어진 배열로 조정하여 보여줌.
-> 제한 시간 안에 순발력을 활용하여 해당 배열에서 없는 숫자를 발견 후, 입력하게 하면 수행 성공.
1단계 : 10
2단계 : 20
3단계 : 30
시간 : 10초"		상
	순발력 게임2	두더지 게임	"- 두더지 출현 횟수 
n마리 중 m마리 이상 잡았을 경우
1단계 : 1마리씩 나오기
2단계 : 2마리씩 나오기도 하기
3단계 : 3마리씩 나오기도 하기"		하
	논리력 게임1	숫자 혹은 사칙연산 추론 게임을 활용하여 유저의 논리력 향상에 도움을 줌.	"- 숫자 혹은 사칙연산 추론 게임
: 특정한 타겟 값을 사용자에게 노출하여 사용자가 타겟 값을 만들기 위한 숫자 혹은 연산을 선택함.
-> 아직 완성되지 않은 수식을 함께 보여주며 빈 값에 맞는 것을 선택하도록 함. 
-> 타겟 값을 성공적으로 만들 수 있는 숫자 혹은 연산을 선택하였을 경우, 수행 성공.
- 타겟 값 예시: <10을 만드세요.>
- 추론 전 식 예시: 2 _ 5
-> 위 예시에 대한 올바른 값: * 
1단계 : 숫자추론
2단계 : 부호(+,-) 추론
3단계 : 사칙연산 추론"		상
	논리력 게임2	대소비교 게임	"-대소비교
질문 : 누가 더 큰가요?
숫자 범위 : 1~100
1단계 : 둘 다 숫자 * 3개씩
2단계 : 하나는 식, 하나는 숫자 * 3개씩
3단계 : 둘 다 식 * 3개씩"		중
	결과 통계	유저의 게임 결과를 저장하여, 마이페이지에서 자신의 결과를 장기적으로 확인 가능하도록 함.	"- 자신의 게임 결과를단발적으로 확인하는 것에 그치지 아니함.
- 마이페이지에서 게임 결과를 통계적으로 확인 가능.
-> 분야별 게임의 평균 수행 능력 확인 가능: 오각형 그래프
-> 전체 게임의 평균 수행 능력 확인 가능: 월별 게임 수행 능력 추이 그래프
- 게임 결과에 따른 '똑똑지수'(아래 경험치에서 상세 설명 확인 가능) 반영 "		상
	경험치	게임 보상과 관련한 능력지수로, 자신의 게임 경험치인 '똑똑지수'를 올리는 것을 목표로 하게 함. 	"- '똑똑지수' 도입
: 게임 결과 보상으로, 게임 수행 능력에 따른 자신의 역량을 평가하기 위한 지표.
- '똑똑지수'가 향상할 수록 자신의 게임 수행 능력에 관한 객관적 확인이 가능.
: '똑똑지수' 향상을 통한 게임 흥미 유발 가능."		상
	랭킹제도	개인 결과 혹은 다른 유저 간 대결을 통해 얻은 '똑똑지수'로 결과를 합산하여 랭킹을 공개함.	"- 랭킹 제도 도입.
-> 다른 유저와 협동게임을 통해 얻은 게임의 결과의 '똑똑지수'를 점수로 환산하여 랭킹 선정.
-> 자신의 랭킹을 확인하여 본인의 게임 수행 능력을 다른 사람과 비교하여 확인 가능.
: 랭킹 향상을 위한 게임 흥미 유발 가능.  "		상
	협동 게임	다른 유저와 게임을 실시간으로 함께 공유하여 진행시, 합동하여 하나의 화면을 서로 제어함.	"- 유저간 협동 게임
: 같은 게임을 수행하는 두 유저의 게임을 동시 화면으로 공유하여 함께 게임을 클리어 하도록 함.
-> 게임 수행 능력은 개인 게임시 점수를 환산하는 방법과 동일한 방법으로 확인 가능.
-> 두 유저가 동일한 점수 획득 가능."		상

### 피그마 
치매 진단 테스트 화면 기획



### 2025.01.17

### ERD 설계 ###
*ABOUT GAME

- [ ]  게임 카테고리별 점수 ( 카테고리별 총점을 무슨 기준으로 내야할까 )
- [ ]  유저 게임 총점 ( 랭킹을 위한)
- [ ]  유저의 게임 평균 월별 기록
- [ ]  평균을 위한 유저 해당 월의 일별 기록

*ABOUT USER

- [ ]  개인 정보 리스트 (보안적인 요소 : 이메일, 비밀번호, 폰번호)
- [ ]  유저 친구 리스트 (친구 신청한 상대인지, 신청 받은 상태인지, 친구인지에 따른 세가지 형태로 분류)
- [ ]  치매 진단 테스트 결과

- 
- 게임 카테고리별 테이블
    - uid pk fk
    - average (double)
    - category (enum)
- 게임 기록 일 별 테이블(해당 월 -30/31일)  → 배치
    - id pk
    - uid fk
    - game_category (enum, ?)
    - score (int)
    - played_at (datetime)
- 게임 결과테이블(1월 - 30점, 2월 - 40점)  → 배치
    - **한 달이 지날 때마다 게임 기록 일 별 테이블을 가져와 해당 월의 평균을 갖고 와서 계산 후 삽입**
    - id pk
    - uid fk
    - date(%Y-%M)
    - score(double)
- 말동무테이블
    - uid pk,fk
    - last_conversation_summary (textarea)
- 사용자 치매진단테이블
    - uid pk,fk
    - user_answer_smcq - json {1 : 1, 2: 1 , ,,,, 14: 0}
    - user_prev_smcq -  json {1 : 1, 2: 1 , ,,,, 14: 0}
    - protector_answer_sdq - json{1 : 1, 2: 0 , ,,,,  32: 1}
    - user_date
    - protector_date


### 톡톡케어 로고 제작 ###

